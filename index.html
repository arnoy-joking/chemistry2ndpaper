<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Existing scripts for video and XLSX handling -->
  <script type="text/javascript">
    var gk_isXlsx = false;
    var gk_xlsxFileLookup = {};
    var gk_fileData = {};
    function filledCell(cell) {
      return cell !== '' && cell != null;
    }
    function loadFileData(filename) {
      if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
        try {
          var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
          var firstSheetName = workbook.SheetNames[0];
          var worksheet = workbook.Sheets[firstSheetName];
          var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
          var filteredData = jsonData.filter(row => row.some(filledCell));
          var headerRowIndex = filteredData.findIndex((row, index) =>
            row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
          );
          if (headerRowIndex === -1 || headerRowIndex > 25) headerRowIndex = 0;
          var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex));
          csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
          return csv;
        } catch (e) {
          console.error(e);
          return "";
        }
      }
      return gk_fileData[filename] || "";
    }
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>পড় মন দিয়া</title>
  <link rel="icon" href="https://cdn-icons-png.freepik.com/512/7856/7856382.png" type="image/png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://cdn.plyr.io/3.7.8/plyr.css" rel="stylesheet">
  <style>
    body {
      background: radial-gradient(circle at top, #0f0f3d, #000);
      color: #e2e8f0;
      min-height: 100vh;
      background-attachment: fixed;
      font-family: 'Segoe UI', sans-serif;
    }

    header {
      background-color: #000;
      box-shadow: 0 0 10px #0ff;
    }

    .bg-white {
      background-color: rgba(255, 255, 255, 0.05) !important;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .text-gray-100,
    .text-lg {
      color: #9cf !important;
    }

    #classList li {
      color: #ccc;
    }

    #classList li:hover {
      background-color: rgba(0, 255, 255, 0.1);
    }

    .bg-blue-200 {
      background-color: rgba(0, 255, 255, 0.2) !important;
    }

    .text-red-500 {
      color: #f56565;
    }

    .fake-button {
      pointer-events: none;
      opacity: 0.6;
    }

    .footer-quotes {
      margin-top: 1rem;
      font-size: 0.9rem;
      color: #888;
    }

    .footer-quotes p {
      margin-bottom: 0.5rem;
    }

    .download-emoji {
      background-color: #0ff;
      color: #000;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      transition: background 0.3s;
    }

    .download-emoji:hover {
      background-color: #0cc;
    }

    .shadow-md {
      box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
    }

    h1, h2 {
      text-shadow: 0 0 10px #0ff;
    }

    footer {
      background-color: #000;
      color: #888;
      border-top: 1px solid #222;
    }
  </style>
</head>
<body class="font-sans">
  <header class="bg-black text-white p-4 flex items-center">
    <img src="https://bondipathshala.com.bd/files/logo.png" alt="Bondi Pathshala Logo" class="h-10">
    <h1 class="ml-4 text-xl font-bold">পড়ালেখা করা ভালো</h1>
  </header>

  <div class="container mx-auto p-4 flex flex-col lg:flex-row gap-4">
    <div class="lg:w-3/4 bg-white rounded-lg shadow-md p-4">
      <h2 class="text-lg font-semibold mb-4 text-gray-100">Live Class</h2>
      <div id="player" data-plyr-provider="youtube" data-plyr-embed-id="RUQcm3vIbWo"></div>
      <div class="flex space-x-4 mt-4">
        <a id="downloadPdfBtn" href="https://www.bondipathshala.com.bd/pdf/20240527-1716748184-LRH05IsN.pdf" target="_blank" class="inline-block bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
          <i class="fas fa-file-pdf mr-2"></i>Download PDF
        </a>
        <button id="downloadEmojiBtn" class="download-emoji">
          <i class="fas fa-smile mr-2"></i>Open on YouTube
        </button>
      </div>
    </div>

    <div class="lg:w-1/4 bg-white rounded-lg shadow-md p-4">
      <button id="openAddVideoBtn" class="w-full bg-black text-white p-2 rounded mb-4 fake-button">
        <i class="fas fa-plus mr-2"></i>Add New Class
      </button>

      <h2 class="text-lg font-semibold mb-4 text-gray-100">Class List</h2>
      <ul id="classList" class="space-y-2 max-h-96 overflow-y-auto">
     <li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="UYKjozabKqo" data-nname="পরিবেশ রসায়ন - পর্ব ০১" data-npdf="20250218-1739823323-3VzTLEL1.pdf">
  পরিবেশ রসায়ন - পর্ব ০১ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="zDyEkh6n0e8" data-nname="পরিবেশ রসায়ন - পর্ব ০২" data-npdf="20250223-1740247928-odF2s7sY.pdf">
  পরিবেশ রসায়ন - পর্ব ০২ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="nWjQ3MRWxwo" data-nname="পরিবেশ রসায়ন - পর্ব ০৩" data-npdf="20250225-1740429645-LEv6OOKn.pdf">
  পরিবেশ রসায়ন - পর্ব ০৩ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="3_3trnRP39Y" data-nname="পরিবেশ রসায়ন - পর্ব ০৪" data-npdf="20250303-1740940741-meClfVqN.pdf">
  পরিবেশ রসায়ন - পর্ব ০৪ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="bC00Z3Ic1Xk" data-nname="পরিবেশ রসায়ন - পর্ব ০৫" data-npdf="20250306-1741200018-xWiO1pyn.pdf">
  পরিবেশ রসায়ন - পর্ব ৫.১ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="bgQHU6Xujk0" data-nname="পরিবেশ রসায়ন - পর্ব ০৫" data-npdf="20250306-1741200018-xWiO1pyn.pdf">
  পরিবেশ রসায়ন - পর্ব ৫.২ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="7IMIa5hhLRI" data-nname="পরিবেশ রসায়ন - পর্ব ০৬" data-npdf="20250311-1741633017-K9qX4VRe.pdf">
  পরিবেশ রসায়ন - পর্ব ০৬ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="uJ856LNuNew" data-nname="পরিবেশ রসায়ন - পর্ব ০৭" data-npdf="20250312-1741782028-HG9S5qpX.pdf">
  পরিবেশ রসায়ন - পর্ব ০৭ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="M1c8rt6PQNg" data-nname="পরিবেশ রসায়ন - পর্ব ০৮" data-npdf="20250317-1742185178-YIKmZZW9.pdf">
  পরিবেশ রসায়ন - পর্ব ০৮ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="JXw939poe3s" data-nname="পরিবেশ রসায়ন - পর্ব ০৯" data-npdf="20250319-1742389133-v4UTOPzR.pdf">
  পরিবেশ রসায়ন - পর্ব ০৯ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="3O7YKhp_ecc" data-nname="পরিবেশ রসায়ন - পর্ব ১০" data-npdf="20250324-1742753112-1Y11SX5L.pdf">
  পরিবেশ রসায়ন - পর্ব ১০ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="ipP4qHlM6BE" data-nname="পরিবেশ রসায়ন । CQ Solve" data-npdf="20250326-1742990797-waHcgGmU.pdf">
  পরিবেশ রসায়ন । CQ Solve <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="87dsre6Xmu8" data-nname="পরিবেশ রসায়ন । Engineering Question Solve" data-npdf="20250326-1742990954-0FjGgcaK.pdf">
  পরিবেশ রসায়ন । Engineering Question Solve <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="KX9Zsr0q-sM" data-nname="পরিবেশ রসায়ন - পর্ব ১১" data-npdf="20250327-1743018786-VGGzkUun.pdf">
  পরিবেশ রসায়ন - পর্ব ১১ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="of06Ub_etWw" data-nname="পরিমাণগত রসায়ন - পর্ব ০১" data-npdf="20250414-1744575810-wa0Fvcck.pdf">
  পরিমাণগত রসায়ন - পর্ব ০১ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="xz61nu85cIY" data-nname="পরিমাণগত রসায়ন - পর্ব ০২" data-npdf="20250416-1744744963-MlP5oCQ3.pdf">
  পরিমাণগত রসায়ন - পর্ব ০২ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="F1mnRXoahO0" data-nname="পরিমাণগত রসায়ন - পর্ব ০৩" data-npdf="20250418-1744921916-P3IbDZg8.pdf">
  পরিমাণগত রসায়ন - পর্ব ০৩ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="hIdjjYBlmSE" data-nname="পরিমাণগত রসায়ন - পর্ব ০৪" data-npdf="20250421-1745183180-EYuNW0w2.pdf">
  পরিমাণগত রসায়ন - পর্ব ০৪ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="vE0d8VQ6tPM" data-nname="পরিমাণগত রসায়ন - পর্ব ০৫" data-npdf="20250423-1745347488-uxt3UlV5.pdf">
  পরিমাণগত রসায়ন - পর্ব ০৫ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="7QzJDf9fHmM" data-nname="পরিমানগত  রসায়ন - পর্ব ০৬">
  পরিমানগত  রসায়ন - পর্ব ০৬
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="n-G4CH8uAiU" data-nname="পরিমাণগত রসায়ন - পর্ব ০৭" data-npdf="20250430-1745959044-cxfl0JEK.pdf">
  পরিমাণগত রসায়ন - পর্ব ০৭ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="neyYWLVb8HU" data-nname="পরিমাণগত রসায়ন - পর্ব ০৮" data-npdf="20250505-1746386045-uXqlB0Sl.pdf">
  পরিমাণগত রসায়ন - পর্ব ০৮ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="VIHxAuzcdYE" data-nname="পরিমাণগত রসায়ন - পর্ব ০৯" data-npdf="20250507-1746563965-cSOGn02p.pdf">
  পরিমাণগত রসায়ন - পর্ব ০৯ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="_lnt_CcfGSc">
  পরিমাণগত রসায়ন - পর্ব ১০
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="wYxLw7vqCII" data-nname="পরিমাণগত রসায়ন  - পর্ব ১১" data-npdf="20250514-1747164944-c4epAO9L.pdf">
  পরিমাণগত রসায়ন  - পর্ব ১১ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="vBLx4noei-o" data-nname="পরিমাণগত রসায়ন - পর্ব ১২" data-npdf="20250516-1747341805-KQvQzBIV.pdf">
  পরিমাণগত রসায়ন - পর্ব ১২ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="ekq2aprmt3c" data-nname="পরিমাণগত রসায়ন  - পর্ব  ১৩" data-npdf="20250519-1747594848-XxqYzdzh.pdf">
  পরিমাণগত রসায়ন  - পর্ব  ১৩ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="wHDJVekpwyM">
  পরিমাণগত রসায়ন - পর্ব  ১৪
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="I14Acmq0slk" data-nname="পরিমাণগত রসায়ন - পর্ব  ১৫" data-npdf="20250523-1747950969-fsjRq3SX.pdf">
  পরিমাণগত রসায়ন - পর্ব  ১৫ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="EavZklqL7q0" data-nname="পরিমাণগত রসায়ন - পর্ব ১৬" data-npdf="20250526-1748209675-d4l5AWS8.pdf">
  পরিমাণগত রসায়ন - পর্ব ১৬ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
<li class="class-item p-2 rounded hover:bg-blue-100 cursor-pointer" data-vid="9bE3dgV2onI" data-nname="পরিমাণগত রসায়ন - পর্ব ১৭" data-npdf="20250528-1748381795-CncIVfPk.pdf">
  পরিমাণগত রসায়ন - পর্ব ১৭ <i class="fas fa-file-pdf text-red-500 ml-2"></i>
</li>
      </ul>
    </div>
  </div>

  <footer class="bg-gray-800 text-white p-4 text-center">
    <p>©Developed by Arnoy with Grok and Gemini.</p>
    <div class="footer-quotes">
      <p>রচনায় প্যারা যত বেশি, নাম্বার ও তত বেশী</p>
        <p>পরীক্ষার আগের রাতের পড়া হচ্ছে আসল পড়া</p>
    </div>
  </footer>

  <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
  <script>
    // Initialize Plyr
    const player = new Plyr('#player', {
      controls: ['play-large', 'play', 'progress', 'current-time', 'mute', 'settings', 'pip', 'fullscreen'],
      youtube: { noCookie: true, rel: 0, showinfo: 0, modestbranding: 1 }
    });

    // Function to find and set the highest available quality
    function setHighestQuality() {
      const availableQualities = player.quality.options;
      if (availableQualities && availableQualities.length > 0) {
        // Filter out 'auto' and sort numerically in descending order
        const sortedQualities = availableQualities
          .filter(quality => quality !== 'auto')
          .sort((a, b) => parseInt(b) - parseInt(a));

        if (sortedQualities.length > 0) {
          const highestQuality = sortedQualities[0];
          if (player.quality !== highestQuality) {
            player.quality = highestQuality;
            console.log(`Set playback quality to highest available: ${highestQuality}`);
          }
        }
      }
    }

    // Listen for the 'ready' event to set quality once the player is ready
    player.on('ready', event => {
      setTimeout(setHighestQuality, 100);
    });

    // Listen for the 'sourcechange' event to set quality when a new video is loaded
    player.on('sourcechange', event => {
      setTimeout(setHighestQuality, 100);
    });

    // Variable to store the current video ID
    let currentVideoId = '';

    // Handle class selection
    function attachClassItemListeners() {
      const classItems = document.querySelectorAll('.class-item');
      const downloadPdfBtn = document.getElementById('downloadPdfBtn');

      // Remove existing listeners to prevent duplicates
      classItems.forEach(item => {
        const old_listener = item._eventListener;
        if (old_listener) {
          item.removeEventListener('click', old_listener);
        }
      });

      classItems.forEach(item => {
        const new_listener = () => {
          const videoId = item.dataset.vid;
          currentVideoId = videoId; // Store the video ID for the YouTube button
          player.source = {
            type: 'video',
            sources: [{ src: videoId, provider: 'youtube' }]
          };
          classItems.forEach(i => i.classList.remove('bg-blue-200'));
          item.classList.add('bg-blue-200');
          const pdfLink = item.dataset.npdf;
          if (pdfLink) {
            downloadPdfBtn.href = `https://www.bondipathshala.com.bd/pdf/${pdfLink}`;
            downloadPdfBtn.classList.remove('hidden');
          } else {
            downloadPdfBtn.classList.add('hidden');
          }
        };
        item.addEventListener('click', new_listener);
        item._eventListener = new_listener;
      });
    }
    attachClassItemListeners();

    // Load videos from localStorage
    const storedVideos = JSON.parse(localStorage.getItem('customVideos')) || [];
    const classListUl = document.getElementById('classList');
    storedVideos.forEach(video => {
      const li = document.createElement('li');
      li.className = 'class-item p-2 rounded hover:bg-blue-100 cursor-pointer';
      li.dataset.vid = video.id;
      li.dataset.nname = video.title;
      li.dataset.npdf = video.pdfLink || '';
      li.innerHTML = `${video.title}${video.pdfLink ? ` <i class="fas fa-file-pdf text-red-500 ml-2"></i>` : ''}`;
      classListUl.appendChild(li);
    });
    attachClassItemListeners();

    // Download Emoji button functionality using the stored video ID
    const downloadEmojiBtn = document.getElementById('downloadEmojiBtn');
    downloadEmojiBtn.addEventListener('click', () => {
      if (currentVideoId) {
        const youtubeUrl = `https://www.youtube.com/watch?v=${currentVideoId}`;
        window.open(youtubeUrl, '_blank');
      } else {
        alert("No video selected");
      }
    });

    // Add keyboard shortcuts:
    // u: volume up, d: volume down, a: slow playback, b: speed up, f: toggle fullscreen
    document.addEventListener('keydown', (event) => {
      const key = event.key.toLowerCase();
      switch (key) {
        case 'u': {
          const newVolume = Math.min(1, player.volume + 0.1);
          player.volume = newVolume;
          console.log(`Volume increased to ${newVolume.toFixed(2)}`);
          break;
        }
        case 'd': {
          const newVolume = Math.max(0, player.volume - 0.1);
          player.volume = newVolume;
          console.log(`Volume decreased to ${newVolume.toFixed(2)}`);
          break;
        }
        case 'a': {
          const newRate = Math.max(0.25, player.playbackRate - 0.25);
          player.playbackRate = newRate;
          console.log(`Playback rate decreased to ${newRate}`);
          break;
        }
        case 'b': {
          const newRate = player.playbackRate + 0.25;
          player.playbackRate = newRate;
          console.log(`Playback rate increased to ${newRate}`);
          break;
        }
        case 'f': {
          player.fullscreen.toggle();
          console.log('Fullscreen toggled');
          break;
        }
      }
    });
  </script>

</body>
</html>
